@model EventFullModel

@{
    ViewBag.Title = Model.Name;
}
<h2>@Model.Name</h2>
<h4>by @Model.Creator.FirstName <b>@Model.Creator.SecondName</b></h4>
<div class="btn btn-danger">@Html.ActionLink("Edit event", "EditEvent", new { eventId = Model.Id })</div>
<div>
    @Html.ActionLink(@Model.CategoryName, "Category", "Event",
            new { categoryId = @Model.CategoryId },
            new { @class = "btn btn-default navbar-btn" })
</div><br>

<img src="@Url.Content("~/Content/Images/" + Model.Image)" class="img-rounded" style="margin: 0 auto;"/>

<h3>Description:</h3>
<p>@Model.Description</p>



<a href="@Url.Action("Like", "Event", new { eventId = Model.Id })" class="btn btn-danger">
    @Model.Likes.Count <span class="glyphicon glyphicon-heart"></span> @(Model.IsLikedByCurrentUser? "Unlike": "Like")
</a>

@if (Model.Likes.Count > 0)
{
    <a data-toggle="collapse" href="#collapse1">Users that left likes</a>
}

<div id="collapse1" class="panel-collapse collapse" style="width:auto;">
    <br />
    @foreach (var user in Model.Likes.Users)
    {
        <li class="list-group-item">@user.FirstName <b>@user.SecondName</b> </li>
    }
</div>


@if (@Model.Tags.Count > 0)
{
    <h2>All tags:</h2>
    foreach (var tag in Model.Tags)
    {
        @Html.ActionLink(tag.Name, "Tag", "Event",
                     new { tagId = tag.Id },
                     new { @class = "btn btn-default navbar-btn" })
    }
}

@if (@Model.Comments.Count > 0)
{
    <h3>Comments:</h3>
    <div class="panel-group">
        @foreach (var comment in Model.Comments)
        {
            <div class="panel panel-default">
                <div class="panel-heading">@comment.User.FirstName <b>@comment.User.SecondName</b> - @comment.Time.ToLocalTime()</div>
                <div class="panel-body">@comment.Text</div>
            </div>
        }
    </div>
}
<br/>
@Html.ActionLink("Add comment", "AddComment", "Event", new { eventId = Model.Id }, new { @class = "btn btn-primary navbar-btn" })
